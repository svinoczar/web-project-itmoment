<!DOCTYPE html>
<html>
  <head>
    <title>Звук</title>
    <meta charset="UTF-8" />
  </head>
  <body>
    <h1>Тест: "Реакция на звук"</h1>
    <p>Нажмите на кнопку, когда будете готовы начать</p>
    <p>Нажмите на пробел, когда услышите звук</p>
    <button id="startButton">Запуск теста</button>
    <p id="result"></p>
    
    <script>
      const startButton = document.getElementById("startButton");
      const result = document.getElementById("result");
      
      let startTime, endTime, totalReactionTime = 0, counter = 0;
      
      function runTest() {
        if (counter < 30) {
          startButton.disabled = true;
          counter++;
          delay = Math.floor(Math.random() * 3000) + 1000;
          setTimeout(function() {
            audio = new Audio("sound.mp3");
            audio.play();
            startTime = new Date().getTime();
          }, delay);
        } else {
          startButton.disabled = false;
          averageReactionTime = Math.floor(totalReactionTime / 30);
          result.textContent = `Среднее время реакции: ${averageReactionTime} ms`;
          startTime = null;
          endTime = null;
          totalReactionTime = 0;
          counter = 0;
        }
      }
      
      startButton.addEventListener("click", function() {
        runTest();
      });
      
      document.addEventListener("keydown", function(event) {
        if (event.code === "Space" && startTime) {
          endTime = new Date().getTime();
          reactionTime = endTime - startTime;
          totalReactionTime += reactionTime;
          runTest();
        }
      });
    </script>
  </body>
</html>
